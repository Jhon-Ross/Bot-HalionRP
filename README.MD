# Halion RP Bot

Este √© um bot para Discord desenvolvido para gerenciar diversas funcionalidades de um servidor Roleplay (RP) chamado Halion RP. Ele inclui recursos como sistema de whitelist, gerenciamento de tickets, comunica√ß√£o oficial, verifica√ß√£o de usu√°rios e modera√ß√£o.

---

## üìã Funcionalidades

### 1. **Sistema de Whitelist**
- **Descri√ß√£o:** Permite que os usu√°rios iniciem um processo de whitelist para ingressar no servidor, respondendo a um question√°rio em um canal privado tempor√°rio.
- **Comando:** `/whitelist` (enviado por um moderador no canal configurado).
- **Fluxo:**
    - O usu√°rio clica no bot√£o "Quero fazer whitelist".
    - Um canal de texto privado √© criado para o usu√°rio.
    - O usu√°rio responde a uma s√©rie de perguntas em um tempo limitado (20 minutos).
    - As respostas s√£o salvas em `whitelist_respostas.csv` e enviadas para um canal de staff (`respostas-whitelist`).
    - Um cooldown de 30 minutos √© aplicado ap√≥s cada tentativa.
- **Arquivos Relacionados:** `cogs/whitelist.py`, `views/whitelist_view.py`, `handlers/questionnaire.py`, `whitelist_respostas.csv`, `whitelist_last_attempt_id.txt`.

### 2. **Sistema de Tickets**
- **Descri√ß√£o:** Permite que os usu√°rios abram tickets para suporte ou d√∫vidas, criando canais privados para comunica√ß√£o com a equipe.
- **Comando:** `/setup_ticket` (para configurar a mensagem de abertura de ticket em um canal).
- **Fluxo:**
    - O usu√°rio clica no bot√£o "Abrir Ticket".
    - Um canal de texto privado √© criado na categoria de tickets.
    - A equipe pode fechar o ticket usando um bot√£o no canal.
    - Ao fechar, uma transcri√ß√£o da conversa √© gerada e enviada para um canal de logs de tickets fechados.
- **Arquivos Relacionados:** `cogs/ticket_system.py`.

### 3. **Comunica√ß√£o Oficial**
- **Descri√ß√£o:** Permite que a equipe envie ou atualize comunicados e avisos oficiais em canais designados.
- **Comando:** `/comunicados <texto>`
- **Funcionalidade:**
    - Atualiza uma mensagem existente no canal de comunicados ou envia uma nova.
    - Pode enviar avisos para um canal de avisos separado.
- **Arquivos Relacionados:** `cogs/communication.py`, `data/comunicados_message_id.txt`.

### 4. **Verifica√ß√£o de Usu√°rios**
- **Descri√ß√£o:** Sistema para verificar novos membros e atribuir cargos automaticamente, al√©m de enviar mensagens de boas-vindas.
- **Comando:** `/verificar` (para enviar o painel de verifica√ß√£o).
- **Fluxo:**
    - O usu√°rio clica no bot√£o "Verificar-se".
    - O cargo de "Visitante" √© removido e o cargo de "Turista" √© atribu√≠do.
    - Mensagens de boas-vindas personalizadas s√£o enviadas para novos membros, incluindo links para regras e verifica√ß√£o, e redes sociais.
- **Arquivos Relacionados:** `cogs/verificacao.py`.

### 5. **Modera√ß√£o**
- **Descri√ß√£o:** Oferece ferramentas b√°sicas de modera√ß√£o para a equipe.
- **Comando:** `/excluir <quantidade>`
- **Funcionalidade:**
    - Exclui uma quantidade espec√≠fica de mensagens (1-100) do canal atual.
    - Registra as a√ß√µes de exclus√£o em um canal de logs.
- **Arquivos Relacionados:** `cogs/moderacao.py`.

### 6. **Conex√£o ao Servidor**
- **Descri√ß√£o:** Fornece informa√ß√µes r√°pidas sobre como se conectar ao servidor Halion RP.
- **Comando:** `/connect`
- **Funcionalidade:**
    - Exibe o link de conex√£o FiveM direto.
    - Inclui um bot√£o para acessar o site oficial do Halion RP.
- **Arquivos Relacionados:** `cogs/conectar.py`, `views/connect_view.py` (impl√≠cita no `conectar.py`).

---

## ‚öôÔ∏è Configura√ß√£o

### 1. **Pr√©-requisitos**
- Python 3.10 ou superior.
- Biblioteca `discord.py` (vers√£o 2.5.2 ou compat√≠vel).
- Biblioteca `python-dotenv` para carregar vari√°veis de ambiente.
- Biblioteca `aiohttp` para requisi√ß√µes HTTP.
- Biblioteca `ctypes` (para Windows, j√° inclusa no Python).

### 2. **Instala√ß√£o**
1. Clone este reposit√≥rio:
   ```bash
   git clone https://github.com/Jhon-Ross/Bot-HalionRP.git
   cd Bot-HalionRP
   ```
2. Instale as depend√™ncias:
   ```bash
   pip install -r requirements.txt
   ```
3. Crie um arquivo `.env` na raiz do projeto e adicione as seguintes vari√°veis:

   ```ini
   # Vari√°veis Essenciais do Bot
   DISCORD_TOKEN=SEU_TOKEN_DO_BOT_AQUI
   DISCORD_GUILD_ID=ID_DO_SEU_SERVIDOR_PRINCIPAL

   # Canais e Cargos (IDs num√©ricos)
   WHITELIST_ID=ID_DO_CANAL_DE_WHITELIST
   ANALISE_ID=ID_DO_CARGO_DE_ANALISE_DA_WHITELIST
   COMUNICADOS_ID=ID_DO_CANAL_DE_COMUNICADOS_OFICIAIS
   AVISOS_ID=ID_DO_CANAL_DE_AVISOS_OPCIONAL # Opcional: Canal para avisos gerais
   VERIFICAR_ID=ID_DO_CANAL_DE_VERIFICACAO
   TURISTA_ID=ID_DO_CARGO_DE_TURISTA_APOS_VERIFICACAO
   VISITANTE_ID=ID_DO_CARGO_DE_VISITANTE_ANTES_DA_VERIFICACAO
   BOAS_VINDAS_ID=ID_DO_CANAL_DE_BOAS_VINDAS
   REGRAS_ID=ID_DO_CANAL_DE_REGRAS # Opcional: Para linkar nas boas-vindas
   LOGS_DISCORD=ID_DO_CANAL_DE_LOGS_GERAIS_DO_BOT # Para logs de modera√ß√£o, verifica√ß√£o, etc.

   # Configura√ß√µes do Sistema de Tickets
   TICKET_CATEGORY_ID=ID_DA_CATEGORIA_ONDE_OS_TICKETS_SERAO_CRIADOS
   CLOSED_TICKET_LOG_CHANNEL_ID=ID_DO_CANAL_DE_LOGS_DE_TICKETS_FECHADOS # Opcional: Para transcri√ß√µes
   TICKET_LOG_CHANNEL_ID=ID_DO_CANAL_DE_LOGS_GERAIS_DE_TICKETS # Opcional: Para logs de abertura/fechamento simples

   # Cargos Permitidos para Comandos de Staff (IDs separados por v√≠rgula, sem espa√ßos)
   ALLOWED_MOD_ROLE_IDS=ID_CARGO1,ID_CARGO2,ID_CARGO3 # Ex: 123456789012345678,987654321098765432
   ```
   **Importante:** Certifique-se de que os IDs dos canais e cargos s√£o num√©ricos e corretos. Para `ALLOWED_MOD_ROLE_IDS`, separe m√∫ltiplos IDs com v√≠rgulas e **sem espa√ßos**.

### 3. **Execu√ß√£o**
- Para iniciar o bot, execute:
  ```bash
  python main.py
  ```
- No Windows, voc√™ tamb√©m pode usar o arquivo `start.bat`.

---

## üõ†Ô∏è Estrutura do Projeto

- `main.py`: Ponto de entrada principal do bot, respons√°vel por carregar os cogs e iniciar o cliente Discord.
- `cogs/`: Cont√©m os m√≥dulos (cogs) que implementam as diferentes funcionalidades do bot (whitelist, tickets, modera√ß√£o, etc.).
    - `communication.py`: Gerencia comunicados oficiais.
    - `conectar.py`: Fornece informa√ß√µes de conex√£o ao servidor.
    - `moderacao.py`: Cont√©m comandos de modera√ß√£o.
    - `ticket_system.py`: Implementa o sistema de tickets.
    - `verificacao.py`: Lida com a verifica√ß√£o de usu√°rios e mensagens de boas-vindas.
    - `whitelist.py`: Gerencia o processo de whitelist.
- `data/`: Armazena dados persistentes, como o ID da √∫ltima mensagem de comunicado.
    - `comunicados_message_id.txt`: Guarda o ID da mensagem do comunicado oficial.
- `database/`: Cont√©m m√≥dulos relacionados √† intera√ß√£o com o banco de dados (se aplic√°vel).
    - `database.py`: L√≥gica de conex√£o e opera√ß√µes de banco de dados.
    - `models.py`: Defini√ß√£o de modelos de dados.
- `handlers/`: Cont√©m a l√≥gica de neg√≥cios e manipuladores de eventos.
    - `questionnaire.py`: L√≥gica do question√°rio de whitelist, incluindo perguntas, cooldowns e salvamento de respostas.
- `logs/`: Diret√≥rio para arquivos de log do bot.
- `utils/`: M√≥dulos com fun√ß√µes e classes utilit√°rias.
    - `buttons.py`: Defini√ß√µes de bot√µes reutiliz√°veis.
    - `embeds.py`: Fun√ß√µes para criar embeds padronizados.
    - `logger.py`: Configura√ß√µes e fun√ß√µes de logging.
- `views/`: Cont√©m as defini√ß√µes de views (bot√µes persistentes) para intera√ß√µes do Discord.
    - `whitelist_view.py`: View para iniciar o processo de whitelist.
- `whitelist_respostas.csv`: Arquivo CSV onde as respostas da whitelist s√£o salvas.
- `whitelist_last_attempt_id.txt`: Armazena o √∫ltimo ID de tentativa de whitelist usado.
- `.gitignore`: Lista de arquivos e diret√≥rios a serem ignorados pelo Git.
- `requirements.txt`: Lista de depend√™ncias Python do projeto.
- `start.bat`: Script simples para iniciar o bot no Windows.

---

## ü§ù Contribui√ß√£o

Sinta-se √† vontade para contribuir com melhorias, corre√ß√µes de bugs ou novas funcionalidades. Por favor, abra uma issue ou envie um Pull Request.

---

## üìÑ Licen√ßa

Este projeto est√° licenciado sob a [Licen√ßa MIT](LICENSE).
